
<!DOCTYPE html>
<html>
  <head>
    <title>Simple Map</title>
    <meta name="viewport" content="initial-scale=1.0">
    <meta charset="utf-8">
  </head>

  <body>
    <div id="chart_div" style="width: 800px; height: 500px;"></div>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script type="text/javascript" src="http://www.google.com/jsapi"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/lodash.js/0.10.0/lodash.min.js"></script>
    <script type=text/javascript>
	//google.load("visualization", "1", {packages:['columnchart']});
	google.load("visualization", "1", {packages:['corechart']});
	google.setOnLoadCallback(drawVisualization);
	$SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
	function drawVisualization() {
		console.log('TTT');
		var data = new google.visualization.DataTable();
		var chart = new google.visualization.ColumnChart(document.getElementById('chart_div'));
		data.addColumn('string', 'Task');
		data.addColumn('number', 'Hours per Day');
/*
		data.addRows([
  			['Work', 11],
  			['Eat', 2],
  			['Commute', 2],
  			['Watch TV', 2],
  			['Sleep', {v:7, f:'7.000'}]
		]);
		//smalldata = [["Peng", 1],["YE", 4]];
*/
		smalldata = [["2018-03-28T00:00:00", 7.862745098039215], ["2018-03-29T00:00:00", 17.942028985507246], ["2018-03-30T00:00:00", 16.341269841269842], ["2018-03-31T00:00:00", 10.2421875], ["2018-04-01T00:00:00", 18.083333333333332], ["2018-04-02T00:00:00", 19.84659090909091], ["2018-04-03T00:00:00", 20.198757763975156], ["2018-04-04T00:00:00", NaN], ["2018-04-05T00:00:00", 16.06206896551724], ["2018-04-06T00:00:00", 11.080188679245284], ["2018-04-07T00:00:00", 11.023148148148149], ["2018-04-08T00:00:00", 16.814432989690722], ["2018-04-09T00:00:00", 15.707142857142857], ["2018-04-10T00:00:00", 9.578397212543553], ["2018-04-11T00:00:00", 11.02787456445993], ["2018-04-12T00:00:00", 11.15625], ["2018-04-13T00:00:00", 18.695652173913043], ["2018-04-14T00:00:00", 19.71014492753623], ["2018-04-15T00:00:00", 22.721254355400696], ["2018-04-16T00:00:00", 14.29020979020979], ["2018-04-17T00:00:00", 15.706293706293707], ["2018-04-18T00:00:00", 15.315972222222221], ["2018-04-19T00:00:00", 13.64808362369338], ["2018-04-20T00:00:00", 16.202797202797203], ["2018-04-21T00:00:00", 15.08362369337979], ["2018-04-22T00:00:00", 19.733333333333334], ["2018-04-23T00:00:00", 17.178321678321677], ["2018-04-24T00:00:00", 14.842657342657343], ["2018-04-25T00:00:00", 12.20774647887324], ["2018-04-26T00:00:00", 11.894736842105264], ["2018-04-27T00:00:00", 15.96140350877193], ["2018-04-28T00:00:00", 13.331010452961673], ["2018-04-29T00:00:00", 11.776223776223777], ["2018-04-30T00:00:00", 10.919298245614035], ["2018-05-01T00:00:00", 13.642105263157895], ["2018-05-02T00:00:00", 13.674825174825175], ["2018-05-03T00:00:00", 21.221526908635795], ["2018-05-04T00:00:00", NaN], ["2018-05-05T00:00:00", NaN], ["2018-05-06T00:00:00", NaN], ["2018-05-07T00:00:00", NaN], ["2018-05-08T00:00:00", NaN], ["2018-05-09T00:00:00", NaN], ["2018-05-10T00:00:00", NaN], ["2018-05-11T00:00:00", 12.165680473372781], ["2018-05-12T00:00:00", 15.618881118881118], ["2018-05-13T00:00:00", 16.449122807017545], ["2018-05-14T00:00:00", 15.05944055944056], ["2018-05-15T00:00:00", 13.017482517482517], ["2018-05-16T00:00:00", 11.985964912280702], ["2018-05-17T00:00:00", 9.79020979020979], ["2018-05-18T00:00:00", 20.202797202797203], ["2018-05-19T00:00:00", 18.031358885017422], ["2018-05-20T00:00:00", 15.066666666666666], ["2018-05-21T00:00:00", 10.91958041958042], ["2018-05-22T00:00:00", 13.961538461538462], ["2018-05-23T00:00:00", 13.728915662650602], ["2018-05-24T00:00:00", 15.16600790513834]];
		var jqxhr = $.getJSON($SCRIPT_ROOT + "/occupancy/" + 10,
                        function(mydata) {
                //mydata = JSON.stringify(mydata);
                mydata = JSON.parse(mydata.data);
		console.log(mydata);
		console.log(smalldata);
		_.forEach(mydata, function(row){
           		data.addRow([row[0], row[1]]);
       })
        
		chart.draw(data);
	}).fail(function() {
		console.log("error");
	})
	}

    </script>
      
</body>
</html>
